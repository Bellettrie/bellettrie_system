# Book Code Generation
For generating book-codes, the system supports multiple different algorithms.

## Cutter's Method
This method is our main method for generating codes.
It yields relatively simple-to-read codes that preserve alphabetic order on author name, or whatever thing the book is "coded based on".
This method is based on a Cutter table, as invented by Charles Ammi Cutter (1837-1903). 

Codes of this type have a shape akin to SF-T-37-lr1. This code is composed of four separate things:


### Location part
The location part is defined by the location in the library. An exception is made in-code for Dutch/Translated, where the system also considers books whose code starts with a 'V' as being correctly coded.

### First Letter Part
The first letter part equals the first letter of the 'sort-string' that the code belongs to.
This code is mostly related to the author name, but may also be from the series-name or indeed a separate string altogether.
The cases where it's not based on author-name are not properly supported by the system currently, and may result in strange book code generation.

### Other Letters Number
The numerical part for an author (or series, ...) is generated by taking the numbers of the authors & cutter table numbers as close as possible before and after (alphabetically).
Then we use numerical approximation to figure out where in the number range it should be put.
For instance, if we have 'Aalborg' and 'Arnhem', and want to give a code for 'Aardvark', we'd give it a code numerically closer to 'Aalborg'.

Note that the number should be read as the digits following `0.`, so 11, 119, 12, 121, 21 is in the correct order.

In principle, codes should not end on a zero, since trailing zeroes have no meaning. However, historically people have not always coded books correctly, so this is an issue sometimes.

Note that some authors have the same location-number as other authors, and thus we run into some situations where the range in which an author needs to get their code has no intermediate numbers. 
This means of course that this new author will also end up with the same number-code. 
Note also that books of authors with the same number-code will necessarily be randomly put together.

### Unique Item Part
The unique item part defines within the range denoted by the first three parts which item it is.
This part is generated by hand by whoever makes the code (although the system may try to do something using the first letters of the first two words of the title), and should be unique.

The system currently enforces no logic on the book-codes that are actually used by the user.

### How are codes selected?
The code-generation trickles down from author to series to book.
This means that, given a location, the author defines (in 99.9% of the cases) which letter and numbers are chosen, and then the series (if applicable) defines the start of the unique item part. The book then defines the last bit of the book-code.


## Title Algorithm
The title-algorithm is a non-algorithm. 
